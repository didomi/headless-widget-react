"use strict";(self.webpackChunkreact_app_widgets=self.webpackChunkreact_app_widgets||[]).push([[4453],{4453:function(e,i,t){t.r(i),t.d(i,{didomi_filters_bar:function(){return d}});var l=t(5671),r=t(3144),a=t(221),s=t(9250),o=t(5743),d=(t(1199),function(){function e(i){var t=this;(0,l.Z)(this,e),(0,a.r)(this,i),this.filterValueChange=(0,a.c)(this,"filterValueChange",7),this.searchTextChange=(0,a.c)(this,"searchTextChange",7),this.clearAllFilters=(0,a.c)(this,"clearAllFilters",7),this.areFiltersExpanded=!1,this.showClearAllFilters=!1,this.searchValue="",this.filters={},this.collapsibleFilters=!0,this.expandFilters=function(){t.areFiltersExpanded=!t.areFiltersExpanded},this.handleFiltersScroll=function(){var e=t.el.querySelector(".didomi-filters-bar-container-scroll"),i=t.el.querySelector(".didomi-filters-bar-container"),l=e.scrollLeft<20,r=e.offsetWidth+e.scrollLeft>e.scrollWidth-20;i.classList.add("right-box-shadow"),i.classList.add("left-box-shadow"),l&&i.classList.remove("left-box-shadow"),r&&i.classList.remove("right-box-shadow")},this.onTextSearchChange=function(e){e.target&&(t.searchValue=e.detail,t.searchTextChange.emit(e.detail))},this.calculateNumberOfVisibleFilters=function(){if(t.collapsibleFilters)if(t.numberOfVisibleFilters)t.numberOfRenderedFilters=t.numberOfVisibleFilters;else{var e=t.el.querySelector(".didomi-filters-bar-container");e&&(t.numberOfRenderedFilters=Math.floor((e.offsetWidth-100)/200))}}}return(0,r.Z)(e,[{key:"onFiltersChange",value:function(){this.calculateNumberOfVisibleFilters(),this.filtersKey="filter-".concat((0,o.g)()),this.updateClearAllFiltersState()}},{key:"onSearchValueChange",value:function(){this.updateClearAllFiltersState()}},{key:"onNumberOfVisibleFiltersChange",value:function(){this.calculateNumberOfVisibleFilters()}},{key:"onCollapsibleFiltersChange",value:function(){this.calculateNumberOfVisibleFilters()}},{key:"onFilterValueChange",value:function(e,i){this.filterValueChange.emit({key:e,newValue:i}),this.updateClearAllFiltersState()}},{key:"updateClearAllFiltersState",value:function(){this.showClearAllFilters=this.shouldShowClearAllFilters()}},{key:"shouldShowClearAllFilters",value:function(){var e=this;if(this.searchValue)return!0;var i=this.el.querySelectorAll(".didomi-filters-bar-select");return Array.from(i).map((function(i){var t,l;return{value:i.value,defaultValue:(null===(t=e.filters[i.dataset.filter])||void 0===t?void 0:t.defaultValue)||(null===(l=e.filters[i.dataset.filter])||void 0===l?void 0:l.value)}})).filter((function(e){var i=e.value,t=e.defaultValue;return Array.isArray(i)&&Array.isArray(t)?!(0,s.l)(i.sort(),t.sort()):i!==t})).length>0}},{key:"onClearAllFilters",value:function(){var e;for(var i in this.filters=Object.assign({},this.filters),this.searchValue="",this.filters){var t=null===(e=this.filters[i])||void 0===e?void 0:e.defaultValue;t&&(this.filters[i].value=t)}this.clearAllFilters.emit(),this.showClearAllFilters=!1}},{key:"componentDidLoad",value:function(){var e=this;this.updateClearAllFiltersState(),this.el.querySelector(".didomi-filters-bar-container-scroll").addEventListener("scroll",this.handleFiltersScroll.bind(this),!0),(0,o.r)((function(){e.calculateNumberOfVisibleFilters()}))}},{key:"disconnectedCallback",value:function(){this.el.querySelector(".didomi-filters-bar-container-scroll").removeEventListener("scroll",this.handleFiltersScroll.bind(this),!0)}},{key:"render",value:function(){var e,i=this,t=(0,o.c)("didomi-button",this.el.tagName),l=(0,o.c)("didomi-select",this.el.tagName),r=(0,o.c)("didomi-select-option",this.el.tagName),s=(0,o.c)("didomi-text-search-input",this.el.tagName),d=Object.keys(this.filters),n=this.collapsibleFilters&&(d.length>this.numberOfRenderedFilters||!this.numberOfRenderedFilters),h=n?d.slice(0,this.numberOfRenderedFilters):d,c=n?d.slice(this.numberOfRenderedFilters):[];void 0===this.numberOfRenderedFilters&&this.collapsibleFilters&&(h=d.slice(0,1),c=[]);var f=function(e){var t=e.filterNames,s=e.collapsed,o=void 0!==s&&s;return t.map((function(e){var t=i.filters[e];return(0,a.h)(l,{key:"".concat(i.filtersKey,"-").concat(e),"data-filter":e,class:"didomi-filters-bar-select",variant:"modern",label:t.label,placeholder:t.placeholder,multi:t.multi,value:t.value,disabled:t.disabled,hideErrorMessage:!0,hide:o,onValueChange:function(t){return i.onFilterValueChange(e,t.detail)}},t.options.map((function(e){return(0,a.h)(r,{label:e.label,value:e.value,"left-icon":e.leftIcon,variant:"modern"})})))}))};return(0,a.h)(a.a,null,(0,a.h)("div",{class:"didomi-filters-bar-body","data-expanded":this.areFiltersExpanded||!!(null===(e=this.searchValue)||void 0===e?void 0:e.length)},(0,a.h)("div",null,(0,a.h)("p",{class:"didomi-filters-bar-left body-normal-semibold"},this.leftText&&(0,a.h)("span",{class:"didomi-filters-bar-left-text"},this.leftText),this.showClearAllFilters&&(0,a.h)("button",{class:"didomi-filter-bar-clear-button",onClick:function(){return i.onClearAllFilters()}},"Clear all filters"))),(0,a.h)("div",{class:"didomi-filters-bar-container ".concat(this.areFiltersExpanded?"right-box-shadow":"")},(0,a.h)("div",{class:"didomi-filters-bar-container-scroll"},(0,a.h)("div",{class:"didomi-filters-bar-select-container"},(0,a.h)(f,{filterNames:h}),(0,a.h)(f,{filterNames:c,collapsed:!this.areFiltersExpanded})))),n&&(0,a.h)(t,{class:"didomi-filters-bar-expand-filters-button","aria-expanded":this.areFiltersExpanded,variant:"modern",onClick:function(){return i.expandFilters()}},this.areFiltersExpanded?"Less filters":"More filters"),this.showSearch&&(0,a.h)(s,{class:"didomi-filters-bar-search-input",value:this.searchValue,title:"Search items",variant:"secondary",collapsible:!0,collapsibleWidth:this.searchInputCollapsibleWidth,placeholder:this.placeholderTextFilter,onValueChange:this.onTextSearchChange,hideErrorMessage:!0})))}},{key:"el",get:function(){return(0,a.g)(this)}}],[{key:"watchers",get:function(){return{filters:["onFiltersChange"],searchValue:["onSearchValueChange"],numberOfVisibleFilters:["onNumberOfVisibleFiltersChange"],collapsibleFilters:["onCollapsibleFiltersChange"]}}}]),e}());d.style='.didomi-filters-bar-body{border-radius:16px;border:1px dotted transparent;display:flex;align-items:center;flex-direction:row;padding:0;transition:padding 300ms}.didomi-filters-bar-body .didomi-filters-bar-left{display:flex;flex-direction:column;padding-right:23px}.didomi-filters-bar-body>*:last-child{margin-right:0}.didomi-filters-bar-body didomi-icon{min-width:15px}.didomi-filters-bar-body .didomi-filters-bar-container{display:flex;flex:1;justify-content:end;white-space:nowrap;position:relative}.didomi-filters-bar-body .didomi-filters-bar-container .didomi-filters-bar-container-scroll{overflow-y:hidden;padding:8px 0 8px 8px}.didomi-filters-bar-body .didomi-filters-bar-container.left-box-shadow::before{content:"";display:block;position:absolute;left:0;width:35px;height:100%;z-index:1;-webkit-box-shadow:inset 25px 0px 25px -25px rgba(0, 0, 0, 0.15);-moz-box-shadow:inset 25px 0px 25px -25px rgba(0, 0, 0, 0.15);box-shadow:inset 25px 0px 25px -25px rgba(0, 0, 0, 0.15)}.didomi-filters-bar-body .didomi-filters-bar-container.right-box-shadow::after{content:"";display:block;position:absolute;right:0;width:35px;height:100%;z-index:1;-webkit-box-shadow:inset -25px 0px 25px -25px rgba(0, 0, 0, 0.15);-moz-box-shadow:inset -25px 0px 25px -25px rgba(0, 0, 0, 0.15);box-shadow:inset -25px 0px 25px -25px rgba(0, 0, 0, 0.15)}.didomi-filters-bar-body .didomi-filters-bar-container .didomi-filters-bar-select-container{display:inline-block;padding-right:4px}.didomi-filters-bar-body .didomi-filters-bar-container .didomi-filters-bar-select-container>.didomi-select:not(.didomi-select-hidden){margin-left:8px}.didomi-filters-bar-body .didomi-filters-bar-container .didomi-filters-bar-select-container>.didomi-select:not(.didomi-select-hidden):first-child{margin-left:0}.didomi-filters-bar-body .didomi-filters-bar-container .didomi-filters-bar-select-container .didomi-select{width:auto;justify-content:end;vertical-align:top}.didomi-filters-bar-body .didomi-filters-bar-expand-filters-button{padding:8px 0;margin-left:4px}.didomi-filters-bar-body .didomi-filters-bar-search-input{margin-left:8px}.didomi-filter-bar-clear-button{font-weight:600;font-size:10px;line-height:20px;color:#2e62d6;text-decoration:underline;text-underline-offset:1px;text-align:left}'}}]);
//# sourceMappingURL=4453.640e2ebc.chunk.js.map