"use strict";(self.webpackChunkreact_app_widgets=self.webpackChunkreact_app_widgets||[]).push([[8511],{8511:function(e,t,n){n.r(t),n.d(t,{didomi_table:function(){return b}});var r=n(4165),a=n(885),i=n(2982),s=n(7762),o=n(5861),l=n(5671),c=n(3144),u=n(221),d=n(5743),h=n(9250),b=(n(1199),function(){function e(t){var n=this;(0,l.Z)(this,e),(0,u.r)(this,t),this.sortChange=(0,u.c)(this,"sortChange",7),this.rowSelectionChange=(0,u.c)(this,"rowSelectionChange",7),this.toggleAllRowsSelectedChange=(0,u.c)(this,"toggleAllRowsSelectedChange",7),this.settingUpItems=!1,this.minWidth=1080,this.useParentHeight=!1,this.loading=!1,this.selectable=!1,this.selectedItems=[],this.preSelectedItems=[],this.sortable=!1,this.isEmpty=!1,this.disabled=!1,this.fixedLayout=!1,this.getRowsWithoutPreSelection=function(){return Array.from(n.el.querySelectorAll(".didomi-table-row")).filter((function(e){return!n.isInPreSelectedItems(e.getAttribute("selection-value"))}))},this.onAllRowSelection=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var o,l,c,u,d,b,p,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getRowsWithoutPreSelection(),l=[],c=(0,s.Z)(o.entries()),e.prev=3,c.s();case 5:if((u=c.n()).done){e.next=13;break}return d=(0,a.Z)(u.value,2),b=d[0],p=d[1],e.next=9,p.getSelectionValue();case 9:m=e.sent,l.push(m||b);case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),c.e(e.t0);case 18:return e.prev=18,c.f(),e.finish(18);case 21:if(!t.detail.selected){e.next=28;break}return n.updateAllCheckItems(!0),n.toggleAllRowsSelectedChange.emit({selectedItems:l,newSelectedItems:[].concat((0,i.Z)(n.selectedItems),(0,i.Z)(l.filter((function(e){return!n.isInSelectedItems(e)}))))}),e.next=26,n.updateHeaderCheckStatus(!1,!0);case 26:e.next=32;break;case 28:return n.updateAllCheckItems(!1),n.toggleAllRowsSelectedChange.emit({selectedItems:[],newSelectedItems:n.selectedItems.filter((function(e){return!l.some((function(t){return(0,h.l)(t,e)}))}))}),e.next=32,n.updateHeaderCheckStatus(!1,!1);case 32:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),this.updateHeaderCheckStatus=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,a){var i,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.el.querySelector(".didomi-table-header-row"),s=Array.from(n.el.querySelectorAll(".didomi-table-row")),i&&(null===s||void 0===s?void 0:s.length)){e.next=4;break}return e.abrupt("return");case 4:if(t){e.next=21;break}if(void 0===a){e.next=17;break}if(!a){e.next=11;break}return e.next=9,i.select();case 9:e.next=15;break;case 11:return e.next=13,i.unSelect();case 13:return e.next=15,i.removePartiallySelection();case 15:e.next=19;break;case 17:return e.next=19,i.removePartiallySelection();case 19:e.next=26;break;case 21:if(!a){e.next=24;break}return e.next=24,i.unSelect();case 24:return e.next=26,i.partiallySelect();case 26:o=0===n.getRowsWithoutPreSelection().length,i.setAttribute("is-selection-disabled",String(o));case 28:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.onRowSelection=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.detail.selected?n.rowSelectionChange.emit({type:"select",selectedItem:t.detail.rowData,newSelectedItems:[].concat((0,i.Z)(n.selectedItems),[t.detail.rowData])}):(a=n.selectedItems.filter((function(e){return!(0,h.l)(e,t.detail.rowData)})),n.rowSelectionChange.emit({type:"unselect",selectedItem:t.detail.rowData,newSelectedItems:a})),e.next=3,n.updateRowSelection();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.removeSelectionFromTable=(0,o.Z)((0,r.Z)().mark((function e(){var t,a,i,s,o,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.el.querySelector(".didomi-table-header-row"),a=n.el.querySelector(".didomi-table-body"),i=Array.from(n.el.querySelectorAll(".didomi-table-row")),!t){e.next=7;break}return t.removeEventListener("toggleAllItemsSelection",n.onAllRowSelection),e.next=7,t.makeUnSelectable();case 7:null===a||void 0===a||a.removeEventListener("rowSelected",n.onRowSelection),null===a||void 0===a||a.removeEventListener("rowsChange",n.setRowSelection),s=0,o=i;case 10:if(!(s<o.length)){e.next=17;break}return l=o[s],e.next=14,null===l||void 0===l?void 0:l.makeUnSelectable();case 14:s++,e.next=10;break;case 17:case"end":return e.stop()}}),e)}))),this.updateRowSelection=(0,o.Z)((0,r.Z)().mark((function e(){var t,a,i,s,o,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Array.from(n.el.querySelectorAll(".didomi-table-row")),a=0,i=0,s=t;case 3:if(!(i<s.length)){e.next=15;break}return o=s[i],e.next=7,o.isSelected();case 7:return l=e.sent,e.next=10,o.isPreSelected();case 10:c=e.sent,(l||c)&&a++;case 12:i++,e.next=3;break;case 15:if(!a){e.next=20;break}return e.next=18,n.updateHeaderCheckStatus(a!==t.length,!0);case 18:e.next=22;break;case 20:return e.next=22,n.updateHeaderCheckStatus(!1,!1);case 22:case"end":return e.stop()}}),e)}))),this.setRowSelection=(0,o.Z)((0,r.Z)().mark((function e(){var t,a,i,s,o,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Array.from(n.el.querySelectorAll(".didomi-table-row")),a=0,i=0,s=0,o=t;case 4:if(!(s<o.length)){e.next=29;break}return l=o[s],e.next=8,l.getSelectionValue();case 8:if(c=e.sent,!n.isInPreSelectedItems(c)){e.next=15;break}return i++,e.next=13,l.preSelect();case 13:e.next=17;break;case 15:return e.next=17,l.unPreSelect();case 17:if(!n.isInSelectedItems(c)){e.next=23;break}return e.next=20,l.select();case 20:a++,e.next=25;break;case 23:return e.next=25,l.unSelect();case 25:null===l||void 0===l||l.makeSelectable();case 26:s++,e.next=4;break;case 29:if(!(a||i)){e.next=35;break}return e.next=33,n.updateHeaderCheckStatus(a+i!==t.length,!0);case 33:e.next=37;break;case 35:return e.next=37,n.updateHeaderCheckStatus(!1,!1);case 37:case"end":return e.stop()}}),e)}))),this.addSelectionToTable=(0,o.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.el.querySelector(".didomi-table-body"),null===(a=n.el.querySelector(".didomi-table-header-row"))||void 0===a||a.makeSelectable(),null===a||void 0===a||a.addEventListener("toggleAllItemsSelection",n.onAllRowSelection),null===t||void 0===t||t.addEventListener("rowSelected",n.onRowSelection),null===t||void 0===t||t.addEventListener("rowsChange",n.setRowSelection),e.next=8,n.setRowSelection();case 8:case"end":return e.stop()}}),e)}))),this.updateSelectableItems=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.selectable){e.next=5;break}return e.next=3,n.addSelectionToTable();case 3:e.next=7;break;case 5:return e.next=7,n.removeSelectionFromTable();case 7:case"end":return e.stop()}}),e)}))),this.onSortChange=function(e){n.sortChange.emit(e.detail)},this.updateSortingColumn=(0,o.Z)((0,r.Z)().mark((function e(){var t,a,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=n.headers)||void 0===t?void 0:t.length){e.next=2;break}return e.abrupt("return");case 2:if(!n.sortable){e.next=25;break}a=(0,s.Z)(n.headers),e.prev=4,a.s();case 6:if((i=a.n()).done){e.next=17;break}if((null===(o=i.value)||void 0===o?void 0:o.sortId)!==n.sortBy){e.next=13;break}return e.next=11,o.setAsSortingColumn();case 11:e.next=15;break;case 13:return e.next=15,o.setAsNotSortingColumn();case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[4,19,22,25]])}))),this.updateSortingHeaders=(0,o.Z)((0,r.Z)().mark((function e(){var t,a,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=n.headers)||void 0===t?void 0:t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.removeSortHeaders();case 4:if(!n.sortable){e.next=34;break}a=(0,s.Z)(n.headers),e.prev=6,a.s();case 8:if((i=a.n()).done){e.next=26;break}if((null===(o=i.value)||void 0===o?void 0:o.sortId)!==n.sortBy){e.next=19;break}return e.next=13,o.setAsSortingColumn();case 13:return e.next=15,o.setSortDirection(n.sortDirection);case 15:return e.next=17,o.addEventListener("sortColumnChange",n.onSortChange);case 17:e.next=23;break;case 19:return e.next=21,o.setAsNotSortingColumn();case 21:return e.next=23,o.addEventListener("sortColumnChange",n.onSortChange);case 23:o.setSortable();case 24:e.next=8;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(6),a.e(e.t0);case 31:return e.prev=31,a.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[6,28,31,34]])}))),this.removeSortHeaders=(0,o.Z)((0,r.Z)().mark((function e(){var t,a,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=n.headers)||void 0===t?void 0:t.length){e.next=2;break}return e.abrupt("return");case 2:a=(0,s.Z)(n.headers),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=13;break}return o=i.value,e.next=9,o.setUnSortable();case 9:return e.next=11,o.removeEventListener("sortColumnChange",n.onSortChange);case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,15,18,21]])}))),this.setTableHeight=function(e){var t=n.el.querySelector(".didomi-table-body");if(t)if(e)t.setAttribute("height",e.toString());else{var r=n.el.parentNode.offsetHeight;r&&n.useParentHeight?t.setAttribute("height",r.toString()):t.hasAttribute("height")&&t.removeAttribute("height")}},this.setUpTableAndRows=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.settingUpItems=!0,n.setTableHeight(n.maxHeight),n.headers=Array.from(n.el.querySelectorAll(".didomi-table-th")),e.next=5,n.updateSortingHeaders();case 5:return e.next=7,n.updateSelectableItems();case 7:n.settingUpItems=!1;case 8:case"end":return e.stop()}}),e)})))}return(0,c.Z)(e,[{key:"maxHeightChange",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setUpTableAndRows();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"heightChange",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setUpTableAndRows();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectableChange",value:function(){this.updateSelectableItems()}},{key:"selectedItemsChange",value:function(){this.updateSelectableItems()}},{key:"preSelectedChange",value:function(){this.updateSelectableItems()}},{key:"sortableChange",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateSortingColumn();case 2:return e.next=4,this.setUpTableAndRows();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sortByChange",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateSortingColumn();case 2:return e.next=4,this.setUpTableAndRows();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isInSelectedItems",value:function(e){return this.selectedItems.some((function(t){return(0,h.l)(t,e)}))}},{key:"isInPreSelectedItems",value:function(e){return this.preSelectedItems.some((function(t){return(0,h.l)(t,e)}))}},{key:"updateAllCheckItems",value:function(e){this.getRowsWithoutPreSelection().forEach((function(t){e?t.select():t.unSelect()}))}},{key:"componentDidLoad",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,d.r)((0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setUpTableAndRows();case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=(0,d.c)("didomi-progress-bar",this.el.tagName);return(0,u.h)(u.a,{class:"didomi-table"},(0,u.h)("table",{class:{"didomi-table-table":!0,"didomi-table-table-loading":this.settingUpItems||this.loading,"didomi-table-table-disabled":this.disabled,"didomi-table-table-empty":this.isEmpty,"didomi-table-table-fixed-layout":this.fixedLayout},style:{minWidth:"".concat(this.minWidth?this.minWidth:1080,"px")}},this.caption&&(0,u.h)("caption",null,this.caption),(this.settingUpItems||this.loading)&&(0,u.h)(e,{class:"didomi-table-progress-bar",indeterminate:!0,label:"Loading table"}),(0,u.h)("slot",null)))}},{key:"el",get:function(){return(0,u.g)(this)}}],[{key:"watchers",get:function(){return{maxHeight:["maxHeightChange"],useParentHeight:["heightChange"],selectable:["selectableChange"],selectedItems:["selectedItemsChange"],preSelectedItems:["preSelectedChange"],sortable:["sortableChange"],sortBy:["sortByChange"]}}}]),e}());b.style=".didomi-table{display:block;position:relative;overflow-x:auto;overflow-y:hidden;width:100%;box-shadow:0px 0px 6px 0px rgba(0, 0, 0, 0.1);border-radius:8px;scrollbar-width:thin;scrollbar-color:#265973 #eff7fb}.didomi-table::-webkit-scrollbar{height:8px;width:8px;border-radius:8px}.didomi-table::-webkit-scrollbar-track{background:#eff7fb}.didomi-table::-webkit-scrollbar-thumb{background-color:#265973;border-radius:8px;border:1px solid #eff7fb}.didomi-table-table{display:table;border-collapse:collapse;position:relative;width:100%;height:100%}.didomi-table-table .didomi-table-row{opacity:1;animation:set-not-loading 200ms ease-out}.didomi-table-table-disabled,.didomi-table-table-loading{pointer-events:none}.didomi-table-table-disabled .didomi-table-row,.didomi-table-table-loading .didomi-table-row{opacity:0.7}.didomi-table-table-loading .didomi-table-row{animation:set-loading 200ms ease-out}.didomi-table-table-empty{pointer-events:none}.didomi-table-table-empty .didomi-table-th-sort-icon{display:none}.didomi-table-table-fixed-layout{table-layout:fixed}.didomi-table-progress-bar.didomi-progress-bar{position:absolute;height:2px;left:0;top:50px;width:100%}@keyframes set-loading{0%{opacity:1}100%{opacity:0.7}}@keyframes set-not-loading{0%{opacity:0.7}100%{opacity:1}}"}}]);
//# sourceMappingURL=8511.5d03a680.chunk.js.map